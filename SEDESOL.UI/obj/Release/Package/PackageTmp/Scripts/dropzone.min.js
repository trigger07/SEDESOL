(function(){function n(t,i,r){var o=n.resolve(t),e,u,f;if(null==o){r=r||t;i=i||"root";e=new Error('Failed to require "'+r+'" from "'+i+'"');e.path=r;e.parent=i;e.require=!0;throw e;}return u=n.modules[o],u._resolving||u.exports||(f={},f.exports={},f.client=f.component=!0,u._resolving=!0,u.call(this,f.exports,n.relative(o),f),delete u._resolving,u.exports=f.exports),u.exports}n.modules={};n.aliases={};n.resolve=function(t){var r,i,t;for(t.charAt(0)==="/"&&(t=t.slice(1)),r=[t,t+".js",t+".json",t+"/index.js",t+"/index.json"],i=0;i<r.length;i++){if(t=r[i],n.modules.hasOwnProperty(t))return t;if(n.aliases.hasOwnProperty(t))return n.aliases[t]}};n.normalize=function(n,t){var r=[],i;if("."!=t.charAt(0))return t;for(n=n.split("/"),t=t.split("/"),i=0;i<t.length;++i)".."==t[i]?n.pop():"."!=t[i]&&""!=t[i]&&r.push(t[i]);return n.concat(r).join("/")};n.register=function(t,i){n.modules[t]=i};n.alias=function(t,i){if(!n.modules.hasOwnProperty(t))throw new Error('Failed to alias "'+t+'", it does not exist');n.aliases[i]=t};n.relative=function(t){function u(n,t){for(var i=n.length;i--;)if(n[i]===t)return i;return-1}function i(r){var u=i.resolve(r);return n(u,t,r)}var r=n.normalize(t,"..");return i.resolve=function(i){var o=i.charAt(0),e,f;return"/"==o?i.slice(1):"."==o?n.normalize(r,i):(e=t.split("/"),f=u(e,"deps")+1,f||(f=0),e.slice(0,f+1).join("/")+"/deps/"+i)},i.exists=function(t){return n.modules.hasOwnProperty(i.resolve(t))},i};n.register("component-emitter/index.js",function(n,t,i){function r(n){if(n)return u(n)}function u(n){for(var t in r.prototype)n[t]=r.prototype[t];return n}i.exports=r;r.prototype.on=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks[n]=this._callbacks[n]||[]).push(t),this};r.prototype.once=function(n,t){function i(){r.off(n,i);t.apply(this,arguments)}var r=this;this._callbacks=this._callbacks||{};t._off=i;this.on(n,i);return this};r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=function(n,t){var i,r;return(this._callbacks=this._callbacks||{},i=this._callbacks[n],!i)?this:1==arguments.length?(delete this._callbacks[n],this):(r=i.indexOf(t._off||t),~r&&i.splice(r,1),this)};r.prototype.emit=function(n){var r,t,i,u;if(this._callbacks=this._callbacks||{},r=[].slice.call(arguments,1),t=this._callbacks[n],t)for(t=t.slice(0),i=0,u=t.length;i<u;++i)t[i].apply(this,r);return this};r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks[n]||[]};r.prototype.hasListeners=function(n){return!!this.listeners(n).length}});n.register("dropzone/index.js",function(n,t,i){i.exports=t("./lib/dropzone.js")});n.register("dropzone/lib/dropzone.js",function(n,t,i){(function(){var n,u,f,e,o,s,r,h,c={}.hasOwnProperty,l=function(n,t){function r(){this.constructor=n}for(var i in t)c.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},a=[].slice;u=typeof Emitter!="undefined"&&Emitter!==null?Emitter:t("emitter");r=function(){};n=function(n){function t(n,r){var f,u,e;if(this.element=n,this.version=t.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],typeof this.element=="string"&&(this.element=document.querySelector(this.element)),!(this.element&&this.element.nodeType!=null))throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(t.instances.push(this),this.element.dropzone=this,f=(e=t.optionsForElement(this.element))!=null?e:{},this.options=i({},this.defaultOptions,f,r!=null?r:{}),this.options.forceFallback||!t.isBrowserSupported())return this.options.fallback.call(this);if(this.options.url==null&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes);this.options.method=this.options.method.toUpperCase();(u=this.getExistingFallback())&&u.parentNode&&u.parentNode.removeChild(u);this.previewsContainer=this.options.previewsContainer?t.getElement(this.options.previewsContainer,"previewsContainer"):this.element;this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:t.getElements(this.options.clickable,"clickable"));this.init()}var i;return l(t,n),t.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"],t.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:1,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here or Click to upload.",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(n,t){return t()},init:function(){return r},forceFallback:!1,fallback:function(){var i,n,u,r,e,f;for(this.element.className=""+this.element.className+" dz-browser-not-supported",f=this.element.getElementsByTagName("div"),r=0,e=f.length;r<e;r++)if(i=f[r],/(^| )dz-message($| )/.test(i.className)){n=i;i.className="dz-message";continue}return n||(n=t.createElement('<div class="dz-message"><span><\/span><\/div>'),this.element.appendChild(n)),u=n.getElementsByTagName("span")[0],u&&(u.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(n){var t,r,i;return t={srcX:0,srcY:0,srcWidth:n.width,srcHeight:n.height},r=n.width/n.height,i=this.options.thumbnailWidth/this.options.thumbnailHeight,n.height<this.options.thumbnailHeight||n.width<this.options.thumbnailWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):r>i?(t.srcHeight=n.height,t.srcWidth=t.srcHeight*i):(t.srcWidth=n.width,t.srcHeight=t.srcWidth/i),t.srcX=(n.width-t.srcWidth)/2,t.srcY=(n.height-t.srcHeight)/2,t},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:r,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:r,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(n){var r,l,a,u,f,e,v,y,p,o,s,h,c,i=this;for(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),n.previewElement=t.createElement(this.options.previewTemplate.trim()),n.previewTemplate=n.previewElement,this.previewsContainer.appendChild(n.previewElement),o=n.previewElement.querySelectorAll("[data-dz-name]"),u=0,v=o.length;u<v;u++)r=o[u],r.textContent=n.name;for(s=n.previewElement.querySelectorAll("[data-dz-size]"),f=0,y=s.length;f<y;f++)r=s[f],r.innerHTML=this.filesize(n.size);for(this.options.addRemoveLinks&&(n._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"<\/a>"),n.previewElement.appendChild(n._removeLink)),l=function(r){return r.preventDefault(),r.stopPropagation(),n.status===t.UPLOADING?t.confirm(i.options.dictCancelUploadConfirmation,function(){return i.removeFile(n)}):i.options.dictRemoveFileConfirmation?t.confirm(i.options.dictRemoveFileConfirmation,function(){return i.removeFile(n)}):i.removeFile(n)},h=n.previewElement.querySelectorAll("[data-dz-remove]"),c=[],e=0,p=h.length;e<p;e++)a=h[e],c.push(a.addEventListener("click",l));return c},removedfile:function(n){var t;return(t=n.previewElement)!=null&&t.parentNode.removeChild(n.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(n,t){var r,i,e,u,f;for(n.previewElement.classList.remove("dz-file-preview"),n.previewElement.classList.add("dz-image-preview"),u=n.previewElement.querySelectorAll("[data-dz-thumbnail]"),f=[],i=0,e=u.length;i<e;i++)r=u[i],r.alt=n.name,f.push(r.src=t);return f},error:function(n,t){var f,i,e,r,u;for(n.previewElement.classList.add("dz-error"),typeof t!="String"&&t.error&&(t=t.error),r=n.previewElement.querySelectorAll("[data-dz-errormessage]"),u=[],i=0,e=r.length;i<e;i++)f=r[i],u.push(f.textContent=t);return u},errormultiple:r,processing:function(n){return n.previewElement.classList.add("dz-processing"),n._removeLink?n._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:r,uploadprogress:function(n,t){var f,i,e,r,u;for(r=n.previewElement.querySelectorAll("[data-dz-uploadprogress]"),u=[],i=0,e=r.length;i<e;i++)f=r[i],u.push(f.style.width=""+t+"%");return u},totaluploadprogress:r,sending:r,sendingmultiple:r,success:function(n){return n.previewElement.classList.add("dz-success")},successmultiple:r,canceled:function(n){return this.emit("error",n,"Upload canceled.")},canceledmultiple:r,complete:function(n){if(n._removeLink)return n._removeLink.textContent=this.options.dictRemoveFile},completemultiple:r,maxfilesexceeded:r,maxfilesreached:r,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name><\/span><\/div>\n    <div class="dz-size" data-dz-size><\/div>\n    <img data-dz-thumbnail />\n  <\/div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress><\/span><\/div>\n  <div class="dz-success-mark"><span>✔<\/span><\/div>\n  <div class="dz-error-mark"><span>✘<\/span><\/div>\n  <div class="dz-error-message"><span data-dz-errormessage><\/span><\/div>\n<\/div>'},i=function(){var t,i,r,u,f,n,e;for(u=arguments[0],r=2<=arguments.length?a.call(arguments,1):[],n=0,e=r.length;n<e;n++){i=r[n];for(t in i)f=i[t],u[t]=f}return u},t.prototype.getAcceptedFiles=function(){var t,n,u,i,r;for(i=this.files,r=[],n=0,u=i.length;n<u;n++)t=i[n],t.accepted&&r.push(t);return r},t.prototype.getRejectedFiles=function(){var t,n,u,i,r;for(i=this.files,r=[],n=0,u=i.length;n<u;n++)t=i[n],t.accepted||r.push(t);return r},t.prototype.getQueuedFiles=function(){var i,n,f,r,u;for(r=this.files,u=[],n=0,f=r.length;n<f;n++)i=r[n],i.status===t.QUEUED&&u.push(i);return u},t.prototype.getUploadingFiles=function(){var i,n,f,r,u;for(r=this.files,u=[],n=0,f=r.length;n<f;n++)i=r[n],i.status===t.UPLOADING&&u.push(i);return u},t.prototype.init=function(){var u,i,f,r,o,s,e,n=this;for(this.element.tagName==="form"&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"<\/span><\/div>")),this.clickableElements.length&&(f=function(){return n.hiddenFileInput&&document.body.removeChild(n.hiddenFileInput),n.hiddenFileInput=document.createElement("input"),n.hiddenFileInput.setAttribute("type","file"),(n.options.maxFiles==null||n.options.maxFiles>1)&&n.hiddenFileInput.setAttribute("multiple","multiple"),n.options.acceptedFiles!=null&&n.hiddenFileInput.setAttribute("accept",n.options.acceptedFiles),n.hiddenFileInput.style.visibility="hidden",n.hiddenFileInput.style.position="absolute",n.hiddenFileInput.style.top="0",n.hiddenFileInput.style.left="0",n.hiddenFileInput.style.height="0",n.hiddenFileInput.style.width="0",document.body.appendChild(n.hiddenFileInput),n.hiddenFileInput.addEventListener("change",function(){var r,t,i,u;if(t=n.hiddenFileInput.files,t.length)for(i=0,u=t.length;i<u;i++)r=t[i],n.addFile(r);return f()})},f()),this.URL=(s=window.URL)!=null?s:window.webkitURL,e=this.events,r=0,o=e.length;r<o;r++){u=e[r];this.on(u,this.options[u])}this.on("uploadprogress",function(){return n.updateTotalUploadProgress()});this.on("removedfile",function(){return n.updateTotalUploadProgress()});this.on("canceled",function(t){return n.emit("complete",t)});this.on("complete",function(){if(n.getUploadingFiles().length===0&&n.getQueuedFiles().length===0)return setTimeout(function(){return n.emit("queuecomplete")},0)});return i=function(n){return n.stopPropagation(),n.preventDefault?n.preventDefault():n.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return n.emit("dragstart",t)},dragenter:function(t){return i(t),n.emit("dragenter",t)},dragover:function(t){var r;try{r=t.dataTransfer.effectAllowed}catch(u){}return t.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy",i(t),n.emit("dragover",t)},dragleave:function(t){return n.emit("dragleave",t)},drop:function(t){return i(t),n.drop(t)},dragend:function(t){return n.emit("dragend",t)}}}],this.clickableElements.forEach(function(i){return n.listeners.push({element:i,events:{click:function(r){if(i!==n.element||r.target===n.element||t.elementInside(r.target,n.element.querySelector(".dz-message")))return n.hiddenFileInput.click()}}})}),this.enable(),this.options.init.call(this)},t.prototype.destroy=function(){var n;return this.disable(),this.removeAllFiles(!0),((n=this.hiddenFileInput)!=null?n.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)},t.prototype.updateTotalUploadProgress=function(){var e,r,n,t,u,i,o,f;if(t=0,n=0,e=this.getAcceptedFiles(),e.length){for(f=this.getAcceptedFiles(),i=0,o=f.length;i<o;i++)r=f[i],t+=r.upload.bytesSent,n+=r.upload.total;u=100*t/n}else u=100;return this.emit("totaluploadprogress",u,n,t)},t.prototype.getFallbackForm=function(){var u,r,n,i;return(u=this.getExistingFallback())?u:(n='<div class="dz-fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"<\/p>"),n+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"><\/div>',r=t.createElement(n),this.element.tagName!=="FORM"?(i=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"><\/form>'),i.appendChild(r)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),i!=null?i:r)},t.prototype.getExistingFallback=function(){var i,r,u,n,f,t;for(r=function(n){for(var i,t=0,r=n.length;t<r;t++)if(i=n[t],/(^| )fallback($| )/.test(i.className))return i},t=["div","form"],n=0,f=t.length;n<f;n++)if(u=t[n],i=r(this.element.getElementsByTagName(u)))return i},t.prototype.setupEventListeners=function(){var t,i,f,n,e,r,u;for(r=this.listeners,u=[],n=0,e=r.length;n<e;n++)t=r[n],u.push(function(){var n,r;n=t.events;r=[];for(i in n)f=n[i],r.push(t.element.addEventListener(i,f,!1));return r}());return u},t.prototype.removeEventListeners=function(){var t,i,f,n,e,r,u;for(r=this.listeners,u=[],n=0,e=r.length;n<e;n++)t=r[n],u.push(function(){var n,r;n=t.events;r=[];for(i in n)f=n[i],r.push(t.element.removeEventListener(i,f,!1));return r}());return u},t.prototype.disable=function(){var r,n,u,t,i;for(this.clickableElements.forEach(function(n){return n.classList.remove("dz-clickable")}),this.removeEventListeners(),t=this.files,i=[],n=0,u=t.length;n<u;n++)r=t[n],i.push(this.cancelUpload(r));return i},t.prototype.enable=function(){return this.clickableElements.forEach(function(n){return n.classList.add("dz-clickable")}),this.setupEventListeners()},t.prototype.filesize=function(n){var t;return n>=1099511627776/10?(n=n/(1099511627776/10),t="TiB"):n>=1073741824/10?(n=n/(1073741824/10),t="GiB"):n>=1048576/10?(n=n/(1048576/10),t="MiB"):n>=1024/10?(n=n/(1024/10),t="KiB"):(n=n*10,t="b"),"<strong>"+Math.round(n)/10+"<\/strong> "+t},t.prototype._updateMaxFilesReachedClass=function(){return this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},t.prototype.drop=function(n){var i,t;n.dataTransfer&&(this.emit("drop",n),i=n.dataTransfer.files,i.length&&(t=n.dataTransfer.items,t&&t.length&&t[0].webkitGetAsEntry!=null?this._addFilesFromItems(t):this.handleFiles(i)))},t.prototype.paste=function(n){var t,i;if((n!=null?(i=n.clipboardData)!=null?i.items:void 0:void 0)!=null)return this.emit("paste",n),t=n.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},t.prototype.handleFiles=function(n){var r,t,u,i;for(i=[],t=0,u=n.length;t<u;t++)r=n[t],i.push(this.addFile(r));return i},t.prototype._addFilesFromItems=function(n){var r,t,u,f,i;for(i=[],u=0,f=n.length;u<f;u++)t=n[u],t.webkitGetAsEntry!=null&&(r=t.webkitGetAsEntry())?r.isFile?i.push(this.addFile(t.getAsFile())):r.isDirectory?i.push(this._addFilesFromDirectory(r,r.name)):i.push(void 0):t.getAsFile!=null?t.kind==null||t.kind==="file"?i.push(this.addFile(t.getAsFile())):i.push(void 0):i.push(void 0);return i},t.prototype._addFilesFromDirectory=function(n,t){var r,u,i=this;return r=n.createReader(),u=function(n){for(var r,u=0,f=n.length;u<f;u++)r=n[u],r.isFile?r.file(function(n){if(!i.options.ignoreHiddenFiles||n.name.substring(0,1)!==".")return n.fullPath=""+t+"/"+n.name,i.addFile(n)}):r.isDirectory&&i._addFilesFromDirectory(r,""+t+"/"+r.name)},r.readEntries(u,function(n){if(typeof console!="undefined"&&console!==null)return typeof console.log=="function"?console.log(n):void 0})},t.prototype.accept=function(n,i){return n.size>this.options.maxFilesize*1048576?i(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(n.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(n,this.options.acceptedFiles)?this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(i(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",n)):this.options.accept.call(this,n,i):i(this.options.dictInvalidFileType)},t.prototype.addFile=function(n){var i=this;return n.upload={progress:0,total:n.size,bytesSent:0},this.files.push(n),n.status=t.ADDED,this.emit("addedfile",n),this._enqueueThumbnail(n),this.accept(n,function(t){return t?(n.accepted=!1,i._errorProcessing([n],t)):i.enqueueFile(n),i._updateMaxFilesReachedClass()})},t.prototype.enqueueFiles=function(n){for(var i,t=0,r=n.length;t<r;t++)i=n[t],this.enqueueFile(i);return null},t.prototype.enqueueFile=function(n){var i=this;if(n.accepted=!0,n.status===t.ADDED){if(n.status=t.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return i.processQueue()},0)}else throw new Error("This file can't be queued because it has already been processed or was rejected.");},t.prototype._thumbnailQueue=[],t.prototype._processingThumbnail=!1,t.prototype._enqueueThumbnail=function(n){var t=this;if(this.options.createImageThumbnails&&n.type.match(/image.*/)&&n.size<=this.options.maxThumbnailFilesize*1048576)return this._thumbnailQueue.push(n),setTimeout(function(){return t._processThumbnailQueue()},0)},t.prototype._processThumbnailQueue=function(){var n=this;if(!this._processingThumbnail&&this._thumbnailQueue.length!==0)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(){return n._processingThumbnail=!1,n._processThumbnailQueue()})},t.prototype.removeFile=function(n){return n.status===t.UPLOADING&&this.cancelUpload(n),this.files=h(this.files,n),this.emit("removedfile",n),this.files.length===0?this.emit("reset"):void 0},t.prototype.removeAllFiles=function(n){var r,i,f,u;for(n==null&&(n=!1),u=this.files.slice(),i=0,f=u.length;i<f;i++)r=u[i],(r.status!==t.UPLOADING||n)&&this.removeFile(r);return null},t.prototype.createThumbnail=function(n,t){var r,i=this;return r=new FileReader,r.onload=function(){var u;return u=document.createElement("img"),u.onload=function(){var f,e,r,o,h,c,l,a;return n.width=u.width,n.height=u.height,r=i.options.resize.call(i,n),r.trgWidth==null&&(r.trgWidth=i.options.thumbnailWidth),r.trgHeight==null&&(r.trgHeight=i.options.thumbnailHeight),f=document.createElement("canvas"),e=f.getContext("2d"),f.width=r.trgWidth,f.height=r.trgHeight,s(e,u,(h=r.srcX)!=null?h:0,(c=r.srcY)!=null?c:0,r.srcWidth,r.srcHeight,(l=r.trgX)!=null?l:0,(a=r.trgY)!=null?a:0,r.trgWidth,r.trgHeight),o=f.toDataURL("image/png"),i.emit("thumbnail",n,o),t!=null?t():void 0},u.src=r.result},r.readAsDataURL(n)},t.prototype.processQueue=function(){var r,t,i,n;if((t=this.options.parallelUploads,i=this.getUploadingFiles().length,r=i,!(i>=t))&&(n=this.getQueuedFiles(),n.length>0)){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,t-i));while(r<t){if(!n.length)return;this.processFile(n.shift());r++}}},t.prototype.processFile=function(n){return this.processFiles([n])},t.prototype.processFiles=function(n){for(var i,r=0,u=n.length;r<u;r++)i=n[r],i.processing=!0,i.status=t.UPLOADING,this.emit("processing",i);return this.options.uploadMultiple&&this.emit("processingmultiple",n),this.uploadFiles(n)},t.prototype._getFilesWithXhr=function(n){var t;return function(){var i,f,r,u;for(r=this.files,u=[],i=0,f=r.length;i<f;i++)t=r[i],t.xhr===n&&u.push(t);return u}.call(this)},t.prototype.cancelUpload=function(n){var r,i,u,f,e,o,s;if(n.status===t.UPLOADING){for(i=this._getFilesWithXhr(n.xhr),u=0,e=i.length;u<e;u++)r=i[u],r.status=t.CANCELED;for(n.xhr.abort(),f=0,o=i.length;f<o;f++)r=i[f],this.emit("canceled",r);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else((s=n.status)===t.ADDED||s===t.QUEUED)&&(n.status=t.CANCELED,this.emit("canceled",n),this.options.uploadMultiple&&this.emit("canceledmultiple",[n]));if(this.options.autoProcessQueue)return this.processQueue()},t.prototype.uploadFile=function(n){return this.uploadFiles([n])},t.prototype.uploadFiles=function(n){var r,f,p,w,ut,s,e,b,k,d,g,ft,o,nt,et,u,h,c,l,a,ot,st,ht,ct,lt,v,at,tt,it,rt,vt,y=this;for(u=new XMLHttpRequest,h=0,ot=n.length;h<ot;h++)r=n[h],r.xhr=u;u.open(this.options.method,this.options.url,!0);u.withCredentials=!!this.options.withCredentials;o=null;p=function(){var t,f,i;for(i=[],t=0,f=n.length;t<f;t++)r=n[t],i.push(y._errorProcessing(n,o||y.options.dictResponseError.replace("{{statusCode}}",u.status),u));return i};nt=function(t){var o,i,u,f,e,h,c,l,s;if(t!=null)for(i=100*t.loaded/t.total,u=0,h=n.length;u<h;u++)r=n[u],r.upload={progress:i,total:t.total,bytesSent:t.loaded};else{for(o=!0,i=100,f=0,c=n.length;f<c;f++)r=n[f],r.upload.progress===100&&r.upload.bytesSent===r.upload.total||(o=!1),r.upload.progress=i,r.upload.bytesSent=r.upload.total;if(o)return}for(s=[],e=0,l=n.length;e<l;e++)r=n[e],s.push(y.emit("uploadprogress",r,i,r.upload.bytesSent));return s};u.onload=function(i){var r;if(n[0].status!==t.CANCELED&&u.readyState===4){if(o=u.responseText,u.getResponseHeader("content-type")&&~u.getResponseHeader("content-type").indexOf("application/json"))try{o=JSON.parse(o)}catch(f){i=f;o="Invalid JSON response from server."}return nt(),200<=(r=u.status)&&r<300?y._finished(n,o,i):p()}};u.onerror=function(){if(n[0].status!==t.CANCELED)return p()};ft=(at=u.upload)!=null?at:u;ft.onprogress=nt;s={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};this.options.headers&&i(s,this.options.headers);for(w in s)ut=s[w],u.setRequestHeader(w,ut);if(f=new FormData,this.options.params){tt=this.options.params;for(d in tt)et=tt[d],f.append(d,et)}for(c=0,st=n.length;c<st;c++)r=n[c],this.emit("sending",r,u,f);if(this.options.uploadMultiple&&this.emit("sendingmultiple",n,u,f),this.element.tagName==="FORM")for(it=this.element.querySelectorAll("input, textarea, select, button"),l=0,ht=it.length;l<ht;l++)if(e=it[l],b=e.getAttribute("name"),k=e.getAttribute("type"),e.tagName==="SELECT"&&e.hasAttribute("multiple"))for(rt=e.options,a=0,ct=rt.length;a<ct;a++)g=rt[a],g.selected&&f.append(b,g.value);else(!k||(vt=k.toLowerCase())!=="checkbox"&&vt!=="radio"||e.checked)&&f.append(b,e.value);for(v=0,lt=n.length;v<lt;v++)r=n[v],f.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),r,r.name);return u.send(f)},t.prototype._finished=function(n,i,r){for(var u,f=0,e=n.length;f<e;f++)u=n[f],u.status=t.SUCCESS,this.emit("success",u,i,r),this.emit("complete",u);return this.options.uploadMultiple&&(this.emit("successmultiple",n,i,r),this.emit("completemultiple",n)),this.options.autoProcessQueue?this.processQueue():void 0},t.prototype._errorProcessing=function(n,i,r){for(var u,f=0,e=n.length;f<e;f++)u=n[f],u.status=t.ERROR,this.emit("error",u,i,r),this.emit("complete",u);return this.options.uploadMultiple&&(this.emit("errormultiple",n,i,r),this.emit("completemultiple",n)),this.options.autoProcessQueue?this.processQueue():void 0},t}(u);n.version="3.8.4";n.options={};n.optionsForElement=function(t){if(t.getAttribute("id"))return n.options[f(t.getAttribute("id"))]};n.instances=[];n.forElement=function(n){if(typeof n=="string"&&(n=document.querySelector(n)),(n!=null?n.dropzone:void 0)==null)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return n.dropzone};n.autoDiscover=!0;n.discover=function(){var u,f,t,i,e,r;for(document.querySelectorAll?t=document.querySelectorAll(".dropzone"):(t=[],u=function(n){var u,i,f,r;for(r=[],i=0,f=n.length;i<f;i++)u=n[i],/(^| )dropzone($| )/.test(u.className)?r.push(t.push(u)):r.push(void 0);return r},u(document.getElementsByTagName("div")),u(document.getElementsByTagName("form"))),r=[],i=0,e=t.length;i<e;i++)f=t[i],n.optionsForElement(f)!==!1?r.push(new n(f)):r.push(void 0);return r};n.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];n.isBrowserSupported=function(){var t,u,i,f,r;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){for(r=n.blacklistedBrowsers,i=0,f=r.length;i<f;i++)if(u=r[i],u.test(navigator.userAgent)){t=!1;continue}}else t=!1;else t=!1;return t};h=function(n,t){var r,i,f,u;for(u=[],i=0,f=n.length;i<f;i++)r=n[i],r!==t&&u.push(r);return u};f=function(n){return n.replace(/[\-_](\w)/g,function(n){return n[1].toUpperCase()})};n.createElement=function(n){var t;return t=document.createElement("div"),t.innerHTML=n,t.childNodes[0]};n.elementInside=function(n,t){if(n===t)return!0;while(n=n.parentNode)if(n===t)return!0;return!1};n.getElement=function(n,t){var i;if(typeof n=="string"?i=document.querySelector(n):n.nodeType!=null&&(i=n),i==null)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i};n.getElements=function(n,t){var h,r,i,u,f,o,s,e;if(n instanceof Array){i=[];try{for(u=0,o=n.length;u<o;u++)r=n[u],i.push(this.getElement(r,t))}catch(c){h=c;i=null}}else if(typeof n=="string")for(i=[],e=document.querySelectorAll(n),f=0,s=e.length;f<s;f++)r=e[f],i.push(r);else n.nodeType!=null&&(i=[n]);if(!(i!=null&&i.length))throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return i};n.confirm=function(n,t,i){return window.confirm(n)?t():i!=null?i():void 0};n.isValidFile=function(n,t){var f,u,i,r,e;if(!t)return!0;for(t=t.split(","),u=n.type,f=u.replace(/\/.*$/,""),r=0,e=t.length;r<e;r++)if(i=t[r],i=i.trim(),i.charAt(0)==="."){if(n.name.toLowerCase().indexOf(i.toLowerCase(),n.name.length-i.length)!==-1)return!0}else if(/\/\*$/.test(i)){if(f===i.replace(/\/.*$/,""))return!0}else if(u===i)return!0;return!1};typeof jQuery!="undefined"&&jQuery!==null&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new n(this,t)})});typeof i!="undefined"&&i!==null?i.exports=n:window.Dropzone=n;n.ADDED="added";n.QUEUED="queued";n.ACCEPTED=n.QUEUED;n.UPLOADING="uploading";n.PROCESSING=n.UPLOADING;n.CANCELED="canceled";n.ERROR="error";n.SUCCESS="success";o=function(n){var s,r,f,h,e,i,c,t,o,u;for(c=n.naturalWidth,i=n.naturalHeight,r=document.createElement("canvas"),r.width=1,r.height=i,f=r.getContext("2d"),f.drawImage(n,0,0),h=f.getImageData(0,0,1,i).data,u=0,e=i,t=i;t>u;)s=h[(t-1)*4+3],s===0?e=t:u=t,t=e+u>>1;return o=t/i,o===0?1:o};s=function(n,t,i,r,u,f,e,s,h,c){var l;return l=o(t),n.drawImage(t,i,r,u,f,e,s,h,c/l)};e=function(n,t){var f,i,e,r,o,u,c,s,h;if(e=!1,h=!0,i=n.document,s=i.documentElement,f=i.addEventListener?"addEventListener":"attachEvent",c=i.addEventListener?"removeEventListener":"detachEvent",u=i.addEventListener?"":"on",r=function(f){if(f.type!=="readystatechange"||i.readyState==="complete")return(f.type==="load"?n:i)[c](u+f.type,r,!1),!e&&(e=!0)?t.call(n,f.type||f):void 0},o=function(){var n;try{s.doScroll("left")}catch(t){n=t;setTimeout(o,50);return}return r("poll")},i.readyState!=="complete"){if(i.createEventObject&&s.doScroll){try{h=!n.frameElement}catch(l){}h&&o()}return i[f](u+"DOMContentLoaded",r,!1),i[f](u+"readystatechange",r,!1),n[f](u+"load",r,!1)}};n._autoDiscoverFunction=function(){if(n.autoDiscover)return n.discover()};e(window,n._autoDiscoverFunction)}).call(this)});n.alias("component-emitter/index.js","dropzone/deps/emitter/index.js");n.alias("component-emitter/index.js","emitter/index.js");typeof exports=="object"?module.exports=n("dropzone"):typeof define=="function"&&define.amd?define(function(){return n("dropzone")}):this.Dropzone=n("dropzone")})();
//# sourceMappingURL=dropzone.min.js.map
